<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Pick Meals</title>
        <!-- Bootstrap -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">
        <link href="fonts/roboto.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
        <script src="//cdnjs.cloudflare.com/ajax/libs/knockout/3.2.0/knockout-min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/knockout.mapping/2.4.1/knockout.mapping.js"></script>
        <!--        <script src="js/jquery.js"></script>-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script src="js/bootstrap.min.js"></script>
    </head>

    <body>
        <div class="main_container">
            <!--*********************************header***********************************-->
            <header>
                <div class="header_top">
                    <div class="container">
                        <div class="home_sign_in">	
                            <span>
                                <a href="">SIGN IN</a>
                                <a href="">SIGN UP</a>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="header_nav">
                    <nav role="navigation" class="navbar navbar-inverse">
                        <div class="container">
                            <div class="logo">
                                <img src="img/logo.png">
                            </div>
                            <div class="navbar-header">
                                <div aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse" class="navbar-toggle collapsed">
                                    <span class="sr-only">Toggle navigation</span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                </div>
                                <a href="#" class="navbar-brand"></a>
                            </div>
                            <div class="navbar-collapse collapse" id="navbar">
                                <ul class="nav navbar-nav navbar-">
                                    <li><a href="#">HOME</a></li>
                                    <li><a href="#">ABOUT US</a></li>
                                    <li><a href="#">ITEMS</a></li>
                                    <li><a href="#">CONTACT US</a></li>
                                </ul>
                                <form class="navbar-form navbar-right">
                                    <input type="text" placeholder="Search..." class="form-control">
                                </form>
                            </div>
                        </div>
                    </nav>
                </div>
            </header>
            <!--******************************************banner********************************************-->
            <div class="banner">
                <div class="container">
                    <div class="banner_in">
                        <div data-ride="carousel" class="carousel slide" id="carousel-example-captions">
                            <ol class="carousel-indicators">
                                <li class="" data-slide-to="0" data-target="#carousel-example-captions"></li>
                                <li data-slide-to="1" data-target="#carousel-example-captions" class=""></li>
                                <li data-slide-to="2" data-target="#carousel-example-captions" class="active"></li>
                            </ol>
                            <div role="listbox" class="carousel-inner">
                                <div class="item">
                                    <img alt="900x500" data-src="holder.js/900x500/auto/#777:#777" src="img/Food-Design.png" data-holder-rendered="true">
                                    <div class="carousel-caption">
                                    </div>
                                </div>
                                <div class="item">
                                    <img alt="900x500" data-src="holder.js/900x500/auto/#777:#777" src="img/Food-Design.png" data-holder-rendered="true">
                                    <div class="carousel-caption">
                                    </div>
                                </div>
                                <div class="item active">
                                    <img alt="900x500" data-src="holder.js/900x500/auto/#777:#777" src="img/Food-Design.png" data-holder-rendered="true">
                                    <div class="carousel-caption">
                                    </div>
                                </div>
                            </div>
                            <a data-slide="prev" role="button" href="#carousel-example-captions" class="left carousel-control">
                                <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a data-slide="next" role="button" href="#carousel-example-captions" class="right carousel-control">
                                <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <!--******************************************content********************************************-->
            <div class="home_content">
                <div class="container">
                    <div class="home_content_in">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="search_bar_main">
                                    <div class="col-sm-3"></div>
                                    <div class="col-sm-6">
                                        <div class="search_bar">
                                            <input  data-bind="value:SearchMeal" placeholder="Search..." class="form-control">
                                            <input type="button"  data-bind="click:Search" value="Search">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-3"></div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-3">
                                    <div class="row">
                                        <div class="home_content_left">
                                            <div class="home_content_left_title">
                                                <h2>MENU</h2>
                                                <ul>
                                                    <li><span><img src="img/panner.jpg"></span><a href="">Panner <span>(5)</span></a></li>
                                                    <li><span><img src="img/panner.jpg"></span><a href="">Chicken <span>(3)</span></a></li>
                                                    <li><span><img src="img/daal_yellow.jpg"></span><a href="">Rajma <span>(4)</span></a></li>
                                                    <li><span><img src="img/bhindi.jpg"></span><a href="">Bhindi <span>(3)</span></a></li>
                                                    <li><span><img src="img/khadi_rice.jpg"></span><a href="">Kadhi Chawal <span>(7)</span></a></li>
                                                    <li><span><img src="img/aloo.jpg"></span><a href="">Aloo <span>(2)</span></a></li>
                                                    <li><span><img src="img/daal_fry.jpg"></span><a href="">Daal Fry <span>(6)</span></a></li>
                                                    <li><span><img src="img/daal_yellow.jpg"></span><a href="">Yellow Daal <span>(6)</span></a></li>
                                                    <li><span><img src="img/channa.jpg"></span><a href="">Channa Masala <span>(8)</span></a></li>
                                                    <li><span><img src="img/biryani.jpg"></span><a href="">Biryani <span>(5)</span></a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                
                                
                                
                                
                                <div class="col-sm-6" id="combination-sec">
                                    <div class="home_content_mid">
                                        <div class="home_content_mid_title">
                                            <h2>List</h2>
                                        </div>
                                        <div class="list_box_main" data-bind="foreach:Combolist">
                                            <div class="list_box">
                                                <div class="list_box_title">
                                                    <h3 data-bind="text: Combination.display_name">Rajma+Paneer+Salad</h3>
                                                </div>
                                                <div class="col-sm-4">
                                                    <div class="row">
                                                        <div class="list_box_left">
                                                            <img src="img/product.png">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div class="row">                                                            
                                                        <div class="list_box_right">
                                                            <ul>
                                                                <li><p data-bind="text: Vendor.name">By Jackson</p></li>
                                                                <li><img src="img/rating.png"></li>
                                                                <li><h4><span>Delivery:</span>Free/45 mins</h4></li>
                                                                <li><h3 ><span>Price:</span>Rs <!-- ko text: Combination.price --><!-- /ko --></h3></li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-2">

                                                    <div class="food_qty_button">
                                                        <button class="" data-bind="attr:{'id':Vendor.id},click: $root.addToCart">Order</button>
                                                    </div>



                                                </div>



                                                <div style="height: 10px" class="clr-div"></div>
                                                <div class="col-lg-12">
                                                    <div class="box_price">
                                                        <div class="row">
                                                            <div class="col-lg-4">
                                                                <div class="row">
                                                                    <div class="food_qty">
                                                                        <span><input type="radio" name="additional" value="female"></span>

                                                                        <label>4 Roti + Half Rice</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-3">
                                                                <div class="food_qty">
                                                                    <input type="radio" name="additional" value="female">
                                                                    <label>6 Roti</label>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-4">
                                                                <div class="row">
                                                                    <div class="food_qty">
                                                                        <input type="radio" name="additional" value="female">
                                                                        <label>2 Roti + Full Rice</label>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div> 
                                                    </div> </div> 
                                            </div>
                                        </div>
                                    </div>



                                </div>

                                <div class="col-sm-3" id="cart-sec">
                                    <div class="row">
                                        <div class="home_content_right">

                                            <div id="sidebar">
                                                <div class="sidebar_main">
                                                    
                                                    <div class="home_content_right_title">
                                                        <h2>YOUR ORDER</h2>
                                                    </div>
                                                    <div class="sidebar_order_list_main" data-bind="foreach:items">
                                                        <div class="sidebar_order_list" >
                                                            <div class="col-sm-2"><p class="order_list_sr" data-bind="text:qty">1</p></div>
                                                            <div class="col-sm-6">
                                                                <div class="row">
                                                                    <p class="order_list_product" data-bind="text:data.Combination.display_name">Manchow Soup Veg.</p>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-4">
                                                                <p class="order_list_price">Rs.
                                                                    <!-- ko text: data.Combination.price * qty() --><!-- /ko -->
                                                                </p>
                                                            </div>
                                                            <div class="col-sm-12">
                                                                <div class="order_list_add">
                                                                    <button class="badge1" data-bind="click: $root.increase">+</button>
                                                                    <button class="badge1" data-bind="click: $root.decrease">-</button>
                                                                </div>
                                                            </div>
                                                        </div>




                                                    </div>

                                                    <div class="order_total">
                                                        <ul>
                                                            
                                                            <li><label>Delivery fee </label><p>FREE</p></li>
                                                            <li><label><b>Total (to be rounded off)</b></label><p><b >Rs. <!-- ko text: total --><!-- /ko --></b></p></li>
                                                        </ul>
                                                    </div>
                                                    <div class="order_checkout">
                                                        <button type="button" class="well">Proceed to checkout</button>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <footer>
                <div class="container">
                    <div class="footer_in">
                        <p>Copyright © 2013 by Company Name</p>
                    </div>
                </div>
            </footer>

            <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        </div>
        <script type="text/javascript">
            
            
            var CombinationVM = function() {
                var me = this;
                me.display_name = ko.observable();
                me.url = ko.observable();
                me.name = ko.observable();
                me.price = ko.observable();
                me.SearchMeal = ko.observable();
                me.Combolist = ko.observableArray([]);
                me.cartItems = ko.observableArray([]);
                me.getData = function() {
                    var m = me;
                    $.post('http://uneekarts.com/office/ofood/api/combinations.json', {
                        "data[User][latitude]": 30.7238504,
                        "data[User][longitude]": 76.8465098,
                        "data[User][count]": 4
                    }, function(d) {
                        m.Combolist(d.data.items);
                    });
                };
                me.getData();
                me.Search = function() {
                    $.post('http://uneekarts.com/office/ofood/api/combinations/search.json', {
                        "data[Combination][search]": me.SearchMeal(),
                    }, function(d) {
                        console.log(d);
                        me.Combolist(d.data);
                    });
                };
                me.addToCart = function(d, e) {
                    CartObj.pushToCart(d, 1, d.Combination.price);

                };
            };

            var CartVM = function() {
                var me = this;
                me.items = ko.observableArray([]);
                me.subt = ko.computed(function(){
                    var x = 0;
                    var d = this.items();
                    for(i in d){
                        x += d[i].qty() * d[i].price();
                    }
                    return x;
                },this);
                
                me.pushToCart = function(item,qty,price){
                    me.items.push({
                        data: item, 
                        qty: ko.observable(qty), 
                        price: ko.observable(price)
                    });
                    //var x = me.
                    //();
                    //me.subt((qty*price) + x );
                }
                me.increase = function(d,e){
                    d.qty(d.qty()+1);
                };
                me.decrease = function(d,e){
                    if(d.qty() == "1"){
                        me.items.remove(d);
                    }else{
                        d.qty(d.qty()-1);
                    }
                }
                me.subTotal = ko.computed(function(){
                    return 0;
                },this);
                me.serviceTax = ko.computed(function(){
                    return 0;
                },this);
                me.vat = ko.computed(function(){
                    return 0;
                },this);
                me.total = ko.computed(function(){
                    return this.subt();
                },this);
            };
            
            
            CartObj = new CartVM();
            ComboObj = new CombinationVM();
            
            $(document).ready(function() {
                ko.applyBindings(ComboObj,$('#combination-sec')[0]);
                ko.applyBindings(CartObj,$('#cart-sec')[0]);
            });
        </script>
        
        <script type="text/javascript">
            $(function() {
                var offset = $("#sidebar").offset();
                var topPadding = 15;
                $(window).scroll(function() {
                    if ($(window).scrollTop() > offset.top) {
                        $("#sidebar").stop().animate({
                            marginTop: $(window).scrollTop() - offset.top + topPadding
                        });
                    } else {
                        $("#sidebar").stop().animate({
                            marginTop: 0
                        });
                    }
                    ;
                });
            });
            $()
        </script>
        
       
    </body>
</html>